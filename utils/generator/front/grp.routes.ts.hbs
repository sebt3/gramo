import {menuLinksProps} from '../interfaces';
import { {{#each objects}}icon{{ short }}, {{/each}} {{ name }}Icon, {{ name }}Title }from '../../libs/{{ name }}/custom.js'
import {  } from '../custom.js';
import { useCRDStore, usePermissionStore } from '../../stores'
const crds = useCRDStore().crds;
const havePermission = usePermissionStore().have;
export const link:menuLinksProps = {
  name: '{{ category }}{{ name }}',
  title: {{ name }}Title, icon: {{ name }}Icon,
  target: '{{ category }}{{ name }}Dashboard',
  targetNS: '{{ category }}{{ name }}NSDashboard',
  children: [
{{#each objects}}
  {{#if (defined crd)}}crds['{{crd.metadata.name}}'] == undefined || {{/if}}!havePermission('{{group}}','{{ short }}')?[]:[{
    name: '{{ group }}{{ short }}', {{#if order }}order: {{order}},{{/if}}
    title: '{{ short }}', caption: 'List {{ short }}', icon: icon{{ short }},
  {{#if namespaced}}
    targetNS: '{{ group }}{{ short }}Table',
  {{/if}}
    target: '{{ group }}{{ short }}{{#if namespaced}}All{{/if}}Table', children: []
  }],
{{/each}}
  ].flat()
}
export const route = {
  path: '{{ name }}',
  name: '{{ category }}{{ name }}',
  redirect: {name: link.target as string},
  meta: {breadcrumb: {{ name }}Title, icon: {{ name }}Icon, ns: false},
  children: [[
    {
      path: '',
      name: '{{ category }}{{ name }}Dashboard',
      component: () => import('../../pages/{{category}}/{{ name }}/{{category}}Dashboard.vue'),
      meta: {breadcrumb: 'Dashboard', icon: {{ name }}Icon, ns: false},
    },
    {
      path: 'dashboards/:namespace',
      name: '{{ category }}{{ name }}NSDashboard',
      component: () => import('../../pages/{{category}}/{{ name }}/{{category}}Dashboard.vue'),
      meta: {breadcrumb: 'Dashboard', icon: {{ name }}Icon, ns: true},
    }],
{{#each objects}}
    {{#if (defined crd)}}crds['{{crd.metadata.name}}'] == undefined || {{/if}}!havePermission('{{group}}','{{ short }}')?[]:[{
      path: '{{ short }}',
      name: '{{ group }}{{ short }}',
      meta: {breadcrumb: '{{ short }}', icon: icon{{ short }}, ns: false},
      children: [
  {{#if namespaced}}
        {
          path: '',
          name: '{{ group }}{{ short }}AllTable',
          component: () => import('../../pages/{{category}}/{{ group }}/{{ short }}List.vue'),
          meta: {breadcrumb: 'All', icon: 'list', ns: false},
        },
  {{/if}}
        {
          path: '{{#if namespaced}}:namespace{{/if}}',
          name: '{{ group }}{{ short }}Table',
          component: () => import('../../pages/{{category}}/{{ group }}/{{ short }}List.vue'),
          meta: {breadcrumb: 'List', icon: 'list', ns: {{toJson namespaced}} },
        },
        {
          path: '{{#if namespaced}}:namespace/{{/if}}view/:name',
          name: '{{ group }}{{ short }}View',
          component: () => import('../../pages/{{category}}/{{ group }}/{{ short }}View.vue'),
          meta: {breadcrumb: 'View', icon: icon{{ short }}, ns: {{toJson namespaced}} },
          children: [
{{#each resolvers}}
            {name: '{{ ../group }}{{ ../short }}ViewFrom{{name}}', path: '{{name}}', redirect: to => { return {name: '{{ ../group }}{{ ../short }}View', params: to.params} }, meta: {animation: '{{type}}'} },
{{/each}}
          ]
        },
        {
          path: '{{#if namespaced}}:namespace/{{/if}}edit/:name',
          name: '{{ group }}{{ short }}Edit',
          component: () => import('../../pages/{{category}}/{{ group }}/{{ short }}Edit.vue'),
          meta: {breadcrumb: 'Edit', icon: 'visibility', ns: {{toJson namespaced}} },
        },
        {
          path: '{{#if namespaced}}:namespace/{{/if}}create',
          name: '{{ group }}{{ short }}Create',
          component: () => import('../../pages/{{category}}/{{ group }}/{{ short }}New.vue'),
          meta: {breadcrumb: 'Create', icon: 'add', ns: {{toJson namespaced}} },
        }
      ]
    }],
{{/each}}
  ].flat(),
}
export default route
